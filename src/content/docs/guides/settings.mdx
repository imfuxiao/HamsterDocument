---
title: 应用设置
---

## 应用设置

应用设置指对「仓」键盘进行自定义调整。仓有两种设置方式：

* 方式一：通过「仓」界面调整
* 方式二：通过配置文件调整

两种方式可以共同使用，但是当两种方式存在冲突时，以通过「仓」界面调整的配置项为准。即「界面设置」优先级最高。

举个例子：

1. 您在「仓」界面设置中设置了显示按键气泡，但是在配置文件中又设置了不显示气泡，那么应用会以界面设置项为准。
2. 您通过「键盘布局」导入功能导入了自定义键盘，但是又在配置文件中定义了键盘，如果两个键盘名称相同，那么以“通过导入功能导入的键盘”为准。

## 如何使用配置文件

在 「RIME」 的不同平台的输入法中，各自输入法都有自己的配置文件。如鼠须管的`squirrel.yaml`等。

「仓」的配置文件是 `hamster.yaml`，配置文件默认是在 `SharedSupport`目录下，此配置文件的每个项都有详细的说明，您可以以此文件为模板，定义自己的配置文件。

需要说明下，目前「仓」的界面设置功能并不能覆盖 `hamster.yaml` 全部配置内容，所以如果需要高度定制「仓」，就必须通过配置文件来调整。

那么如何使用配置文件呢？

1. 定义自己的`hamster.yaml`或者`hamster.custom.yaml`文件，并将文件上传至 `Rime` 目录；
2. 运行「RIME」下的「重新部署」功能，在确定 yaml 配置无问题后，配置生效。

## 配置文件的优先级

因为仓提供两种配置方式：「界面修改」与「配置文件」。所以就会存在配置冲突的问题。

当配置发生冲突时，「仓」会以「界面修改」的内容为主。

请务必请牢记这一条，当您的配置文件不生效时，请检查自己是否在界面中调整过这个配置。

另外，仓在「关于」页面中，提供了「重置界面设置」与「导出界面设置」两个功能。

### 重置界面设置

此功能会删除您在设置界面设置的所有参数，当界面设置项与配置文件项冲突时，您可以通过此项删除设置界面的全部参数，从而使配置文件设置项生效。

### ~~导出界面设置(已删除此功能)~~

当您想把设置界面的设置项转到自己的配置文件时，可以通过此功能，先把设置界面设置的选项导出，然后将导出内容添加的自己的配置文件中。


## 常见问题

### 问题一：`hamster.yaml` 与 `hamster.custom.yaml` 有什么区别，我应该用哪个文件？

有一个惯例，在「RIME」引擎中，任何以`x.custom.yaml`结尾的文件，都是对`x.yaml`文件的补丁，且`x.custom.yaml`文件内容都是以`patch`开头。

既然是补丁文件，`hamster.custom.yaml`配置项肯定要比`hamster.yaml`配置项要少一些，不能是全量配置，不然就失去了补丁的意义了。

当然，您在`hamster.custom.yaml`中定义了全部配置，也不会有问题。

回到开始的问题，应该用哪个文件？

这不是单选题，两个文件一起使用，或者只用其一，都是可以的，具体还是看使用场景。

* 场景一：我用的系统默认键盘，我只需要调整其中几个选项，比如震动，按键气泡等，其他都是默认值。

个人觉的这种场景，就适合使用`hamster.custom.yaml`，因为需要自定义的配置项少，其他都是默认值。

* 场景二：我使用自定义键盘，而且还有很多自定义的配置项。

自定义键盘有复杂的配置且还有很多其他自定义的配置项，这种场景个人认为使用 `hamster.yaml` 会好一些。

可以以`SharedSupport/hamster.yaml`为模板，调整自己的配置项，然后将调整好的 `hamster.yaml`（可能还包含`__include`指令导入的配置文件）上传至 `Rime` 目录下。

当然使用 `hamster.custom.yaml` 也可以完成这个工作。这里只是我个人的习惯。


### 问题二：我是否可以调整`SharedSupport/hamster.yaml`文件，用来调整键盘？

千万不要这样做。虽然您可以修改它，并且修改后也能生效。但`SharedSupport` 是仓内置的目录，不能保证以后在升级版本时，是否会自动覆盖此目录的情况。一旦覆盖了，您的配置项就丢了。

正确的做法：将您修改后的配置文件 `hamster.yaml` 或 `hamster.custom.yaml` 上传至 `Rime` 目录，并运行「重新部署」。


### 问题三：我的配置文件`hamster.yaml`或者`hamster.custom.yaml`配置项没有生效，怎么办？

1. 情况1: 如果您在 App 设置界面的设置项与配置文件中的配置项存在冲突时，「仓」会以界面设置的值为准。也就是「界面配置」优先。
2. 情况2: 请检查配置文件的配置项的名称是否正确？历史中 2.1 版本在升级 2.2 版本时，有一些配置项修改了名称，如果您仍然使用旧的配置项名称，也是不会生效的。
